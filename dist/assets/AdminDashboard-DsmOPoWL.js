import{c as m,U as S,S as D,C as I,a as $,j as s,s as r}from"./index-C9PopRjW.js";import{C as c,a as d,b as o,c as i}from"./card-Dr7gnhHP.js";import{u as O}from"./useQuery-Cs1p8e55.js";import{T as z}from"./trending-up-CR2pTNnu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=m("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=m("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Q=()=>{const{data:e}=O({queryKey:["admin-stats"],queryFn:async()=>{var u,g,h,p,f,j,b,v,y;const t=new Date().toISOString().split("T")[0],[l,n,x,k]=await Promise.all([r.from("profiles").select("id, status"),r.from("tasks").select("id, status"),r.from("attendance").select("id, status").eq("date",t),r.from("approvals").select("id, status").eq("status","pending")]),w=((u=l.data)==null?void 0:u.length)||0,T=((g=l.data)==null?void 0:g.filter(a=>a.status==="active").length)||0,C=((h=l.data)==null?void 0:h.filter(a=>a.status==="away"||a.status==="busy").length)||0,M=((p=n.data)==null?void 0:p.length)||0,P=((f=n.data)==null?void 0:f.filter(a=>a.status==="completed").length)||0,A=((j=n.data)==null?void 0:j.filter(a=>a.status==="in_progress").length)||0,q=((b=x.data)==null?void 0:b.filter(a=>a.status==="present").length)||0,H=((v=x.data)==null?void 0:v.filter(a=>a.status==="absent").length)||0,U=((y=k.data)==null?void 0:y.length)||0;return{totalMembers:w,activeMembers:T,awayMembers:C,totalTasks:M,completedTasks:P,inProgressTasks:A,todayPresent:q,todayAbsent:H,pendingApprovals:U,avgHours:7.5}}}),N=[{title:"Team Members",value:(e==null?void 0:e.totalMembers)||0,icon:S,color:"text-primary",bgColor:"bg-primary/10"},{title:"Total Tasks",value:(e==null?void 0:e.totalTasks)||0,icon:D,color:"text-accent-foreground",bgColor:"bg-accent"},{title:"In Progress",value:(e==null?void 0:e.inProgressTasks)||0,icon:z,color:"text-warning",bgColor:"bg-warning/10"},{title:"Completed",value:(e==null?void 0:e.completedTasks)||0,icon:B,color:"text-success",bgColor:"bg-success/10"},{title:"Avg Hours",value:`${(e==null?void 0:e.avgHours)||0}h`,icon:I,color:"text-muted-foreground",bgColor:"bg-muted"},{title:"Present Today",value:(e==null?void 0:e.todayPresent)||0,icon:R,color:"text-success",bgColor:"bg-success/10"},{title:"Absent Today",value:(e==null?void 0:e.todayAbsent)||0,icon:X,color:"text-destructive",bgColor:"bg-destructive/10"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:$,color:"text-warning",bgColor:"bg-warning/10"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Admin Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Overview of your team's performance"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map((t,l)=>s.jsxs(c,{className:"card-elevated hover:shadow-lg transition-shadow",children:[s.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:t.title}),s.jsx("div",{className:`p-2 rounded-lg ${t.bgColor}`,children:s.jsx(t.icon,{className:`w-4 h-4 ${t.color}`})})]}),s.jsx(i,{children:s.jsx("div",{className:"text-2xl font-bold text-foreground",children:t.value})})]},l))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(c,{className:"card-elevated",children:[s.jsx(d,{children:s.jsx(o,{className:"text-lg",children:"Team Status"})}),s.jsx(i,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-success rounded-full"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Members"})]}),s.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.activeMembers)||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-warning rounded-full"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Away/Busy"})]}),s.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.awayMembers)||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-muted-foreground rounded-full"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Offline"})]}),s.jsx("span",{className:"font-semibold",children:((e==null?void 0:e.totalMembers)||0)-((e==null?void 0:e.activeMembers)||0)-((e==null?void 0:e.awayMembers)||0)})]})]})})]}),s.jsxs(c,{className:"card-elevated",children:[s.jsx(d,{children:s.jsx(o,{className:"text-lg",children:"Task Progress"})}),s.jsx(i,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"Completion Rate"}),s.jsxs("span",{className:"font-semibold",children:[e!=null&&e.totalTasks?Math.round(e.completedTasks/e.totalTasks*100):0,"%"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${e!=null&&e.totalTasks?e.completedTasks/e.totalTasks*100:0}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:e!=null&&e.totalTasks?e.totalTasks-e.completedTasks-e.inProgressTasks:0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-warning",children:(e==null?void 0:e.inProgressTasks)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:(e==null?void 0:e.completedTasks)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Done"})]})]})]})})]})]})]})};export{Q as default};
