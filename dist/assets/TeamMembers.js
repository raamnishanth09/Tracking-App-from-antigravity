import{c as w,r as x,s as n,j as e,I as S,A as p,b as h,X as T,U as q}from"./index.js";import{C as f,a as g,b as j,c as N}from"./card.js";import{B as d}from"./badge.js";import{S as y}from"./scroll-area.js";import{u as v}from"./useQuery.js";import{T as L,a as U,b as c,c as i}from"./tabs.js";import{C as M}from"./chevron-right.js";import{f as o}from"./format.js";import"./index2.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=w("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=w("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),O=()=>{const[l,b]=x.useState(""),[s,m]=x.useState(null),{data:C=[]}=v({queryKey:["team-members"],queryFn:async()=>{const{data:a}=await n.from("profiles").select("*").order("full_name");return a||[]}}),{data:t}=v({queryKey:["member-details",s==null?void 0:s.user_id],enabled:!!s,queryFn:async()=>{if(!s)return null;new Date().toISOString().split("T")[0];const[a,r,k]=await Promise.all([n.from("work_updates").select("*").eq("user_id",s.user_id).order("created_at",{ascending:!1}).limit(10),n.from("learning_updates").select("*").eq("user_id",s.user_id).order("created_at",{ascending:!1}).limit(10),n.from("attendance").select("*").eq("user_id",s.user_id).order("date",{ascending:!1}).limit(30)]);return{workUpdates:a.data||[],learnings:r.data||[],attendance:k.data||[]}}}),_=C.filter(a=>{var r;return a.full_name.toLowerCase().includes(l.toLowerCase())||a.email.toLowerCase().includes(l.toLowerCase())||((r=a.department)==null?void 0:r.toLowerCase().includes(l.toLowerCase()))}),u={active:"bg-success",away:"bg-warning",busy:"bg-destructive",offline:"bg-muted-foreground"};return e.jsxs("div",{className:"flex h-[calc(100vh-120px)] gap-6",children:[e.jsxs(f,{className:"w-96 card-elevated flex-shrink-0",children:[e.jsxs(g,{className:"pb-4",children:[e.jsx(j,{className:"text-lg",children:"Team Members"}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(S,{placeholder:"Search members...",value:l,onChange:a=>b(a.target.value),className:"pl-10"})]})]}),e.jsx(N,{className:"p-0",children:e.jsx(y,{className:"h-[calc(100vh-280px)]",children:e.jsx("div",{className:"space-y-1 px-4 pb-4",children:_.map(a=>e.jsxs("button",{onClick:()=>m(a),className:`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${(s==null?void 0:s.id)===a.id?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"w-10 h-10",children:e.jsx(h,{className:(s==null?void 0:s.id)===a.id?"bg-primary-foreground/20 text-primary-foreground":"gradient-bg text-primary-foreground",children:a.full_name.split(" ").map(r=>r[0]).join("").toUpperCase()})}),e.jsx(A,{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 ${u[a.status||"offline"]} rounded-full border-2 border-card`,fill:"currentColor"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:a.full_name}),e.jsx("p",{className:`text-xs truncate ${(s==null?void 0:s.id)===a.id?"text-primary-foreground/70":"text-muted-foreground"}`,children:a.designation||a.department||"Team Member"})]}),e.jsx(M,{className:"w-4 h-4 opacity-50"})]},a.id))})})})]}),e.jsx(f,{className:"flex-1 card-elevated",children:s?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{className:"w-16 h-16",children:e.jsx(h,{className:"gradient-bg text-primary-foreground text-xl",children:s.full_name.split(" ").map(a=>a[0]).join("").toUpperCase()})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xl",children:s.full_name}),e.jsx("p",{className:"text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(d,{variant:"outline",className:"capitalize",children:s.department||"No Department"}),e.jsx(d,{className:`${u[s.status||"offline"]} text-white capitalize`,children:s.status||"offline"})]})]})]}),e.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-muted rounded-lg",children:e.jsx(T,{className:"w-5 h-5"})})]})}),e.jsx(N,{className:"p-0",children:e.jsxs(L,{defaultValue:"work",className:"w-full",children:[e.jsxs(U,{className:"w-full justify-start rounded-none border-b h-12 bg-transparent px-4",children:[e.jsx(c,{value:"work",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Work Updates"}),e.jsx(c,{value:"learning",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Learning"}),e.jsx(c,{value:"attendance",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Attendance"})]}),e.jsxs(y,{className:"h-[calc(100vh-380px)]",children:[e.jsx(i,{value:"work",className:"p-4 space-y-3 mt-0",children:t!=null&&t.workUpdates.length?t.workUpdates.map(a=>e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:a.title}),e.jsxs(d,{variant:"outline",children:[a.start_time," - ",a.end_time]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:o(new Date(a.date),"MMM d, yyyy")})]},a.id)):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No work updates yet"})}),e.jsx(i,{value:"learning",className:"p-4 space-y-3 mt-0",children:t!=null&&t.learnings.length?t.learnings.map(a=>e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:a.topic}),a.key_learnings&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.key_learnings}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:o(new Date(a.date),"MMM d, yyyy")})]},a.id)):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No learning updates yet"})}),e.jsx(i,{value:"attendance",className:"p-4 mt-0",children:e.jsx("div",{className:"space-y-2",children:t!=null&&t.attendance.length?t.attendance.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-medium",children:o(new Date(a.date),"MMM d, yyyy")}),e.jsx(d,{className:a.status==="present"?"bg-success":a.status==="absent"?"bg-destructive":"bg-warning",children:a.status}),a.hours_worked&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.hours_worked,"h"]})]},a.id)):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No attendance records"})})})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Select a team member to view their details"})]})})})]})};export{O as default};
