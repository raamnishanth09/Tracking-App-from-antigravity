import{c as p,r as m,j as e,P as v,d as b,e as C,I as c,M as S,L as k,B as h,E as M,f as P,s as u,u as f}from"./index-C9PopRjW.js";import{C as D,a as F,b as L,d as A,c as q}from"./card-Dr7gnhHP.js";import{S as E,a as B,b as T,c as R,d as U}from"./select-N4MQfODT.js";import{u as H}from"./useQuery-Cs1p8e55.js";import{P as I,B as V}from"./phone-CDvHmfnC.js";import"./index-BjHVK9V2.js";import"./check-B8NMrcNy.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=p("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=p("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=p("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var G="Label",j=m.forwardRef((r,i)=>e.jsx(v.label,{...r,ref:i,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||((a=r.onMouseDown)==null||a.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));j.displayName=G;var g=j;const J=C("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=m.forwardRef(({className:r,...i},t)=>e.jsx(g,{ref:t,className:b(J(),r),...i}));d.displayName=g.displayName;const ee=()=>{const[r,i]=m.useState(!1),[t,x]=m.useState(!1),[a,l]=m.useState({fullName:"",email:"",phone:"",designation:"",department:"",password:""}),{data:y=[]}=H({queryKey:["departments"],queryFn:async()=>{const{data:s}=await u.from("departments").select("*").order("name");return s||[]}}),N=async s=>{s.preventDefault(),i(!0);try{const{data:n,error:o}=await u.auth.signUp({email:a.email,password:a.password,options:{data:{full_name:a.fullName},emailRedirectTo:window.location.origin}});if(o)throw o;n.user&&(await u.from("user_roles").insert({user_id:n.user.id,role:"team_member"}),await u.from("profiles").update({phone:a.phone,designation:a.designation,department:a.department}).eq("user_id",n.user.id),f.success(`Team member ${a.fullName} has been added successfully! Credentials sent to ${a.email}`),l({fullName:"",email:"",phone:"",designation:"",department:"",password:""}))}catch(n){f.error(n.message||"Failed to add team member")}finally{i(!1)}},w=()=>{const s="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789!@#$%";let n="";for(let o=0;o<12;o++)n+=s.charAt(Math.floor(Math.random()*s.length));l({...a,password:n})};return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(D,{className:"card-elevated",children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 gradient-bg rounded-xl",children:e.jsx(z,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(L,{className:"text-xl",children:"Add New Team Member"}),e.jsx(A,{children:"Create a new team member account with credentials"})]})]})}),e.jsx(q,{children:e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"fullName",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(c,{id:"fullName",placeholder:"John Doe",value:a.fullName,onChange:s=>l({...a,fullName:s.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(c,{id:"email",type:"email",placeholder:"john@example.com",value:a.email,onChange:s=>l({...a,email:s.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(c,{id:"phone",placeholder:"+1 234 567 8900",value:a.phone,onChange:s=>l({...a,phone:s.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"designation",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(c,{id:"designation",placeholder:"Software Developer",value:a.designation,onChange:s=>l({...a,designation:s.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"department",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground z-10"}),e.jsxs(E,{value:a.department,onValueChange:s=>l({...a,department:s}),children:[e.jsx(B,{className:"pl-10",children:e.jsx(T,{placeholder:"Select department"})}),e.jsx(R,{children:y.map(s=>e.jsx(U,{value:s.name,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(c,{id:"password",type:t?"text":"password",placeholder:"Secure password",value:a.password,onChange:s=>l({...a,password:s.target.value}),className:"pl-10 pr-32",required:!0,minLength:6}),e.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex gap-1",children:[e.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(!t),className:"h-7 w-7 p-0","aria-label":t?"Hide password":"Show password",children:t?e.jsx(M,{className:"w-4 h-4"}):e.jsx(P,{className:"w-4 h-4"})}),e.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:w,className:"h-7 text-xs px-2",children:"Generate"})]})]})]})]}),e.jsx("div",{className:"bg-accent/50 rounded-lg p-4 text-sm text-muted-foreground",children:e.jsx("p",{children:"ðŸ“§ An email with login credentials will be sent to the new team member automatically."})}),e.jsx(h,{type:"submit",className:"w-full btn-primary h-12",disabled:r,children:r?"Creating Account...":"Add Team Member"})]})})]})})};export{ee as default};
